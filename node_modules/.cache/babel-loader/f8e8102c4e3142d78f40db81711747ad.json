{"ast":null,"code":"import _classCallCheck from\"/home/quinn/Projects/Around-FrontEnd-Amplify/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/quinn/Projects/Around-FrontEnd-Amplify/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/quinn/Projects/Around-FrontEnd-Amplify/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/quinn/Projects/Around-FrontEnd-Amplify/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{withScriptjs,withGoogleMap,GoogleMap}from\"react-google-maps\";import{AroundMarker}from'./AroundMarker';import{POS_KEY}from'../constants';var NormalAroundMap=/*#__PURE__*/function(_React$Component){_inherits(NormalAroundMap,_React$Component);var _super=_createSuper(NormalAroundMap);function NormalAroundMap(){var _this;_classCallCheck(this,NormalAroundMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.reloadMarker=function(){var center=_this.getCenter();var radius=_this.getRadius();_this.props.loadPostsByTopic(center,radius);};_this.getMapRef=function(mapInstance){_this.map=mapInstance;window.map=mapInstance;};return _this;}_createClass(NormalAroundMap,[{key:\"getCenter\",value:function getCenter(){var center=this.map.getCenter();return{lat:center.lat(),lon:center.lng()};}},{key:\"getRadius\",value:function getRadius(){var center=this.map.getCenter();var bounds=this.map.getBounds();if(center&&bounds){var ne=bounds.getNorthEast();var right=new window.google.maps.LatLng(center.lat(),ne.lng());return 0.001*window.google.maps.geometry.spherical.computeDistanceBetween(center,right);}}},{key:\"render\",value:function render(){if(localStorage.getItem(POS_KEY)==null){var lat=37.84469154098336;var lon=-122.292979660887;}else{var _JSON$parse=JSON.parse(localStorage.getItem(POS_KEY)),lat=_JSON$parse.lat,lon=_JSON$parse.lon;}return/*#__PURE__*/React.createElement(GoogleMap,{ref:this.getMapRef,defaultZoom:11,defaultCenter:{lat:lat,lng:lon},onDragEnd:this.reloadMarker,onZoomChanged:this.reloadMarker},this.props.posts.map(function(post){return/*#__PURE__*/React.createElement(AroundMarker,{post:post,key:post.url});}));}}]);return NormalAroundMap;}(React.Component);export var AroundMap=withScriptjs(withGoogleMap(NormalAroundMap));","map":{"version":3,"sources":["/home/quinn/Projects/Around-FrontEnd-Amplify/src/components/AroundMap.js"],"names":["React","withScriptjs","withGoogleMap","GoogleMap","AroundMarker","POS_KEY","NormalAroundMap","reloadMarker","center","getCenter","radius","getRadius","props","loadPostsByTopic","getMapRef","mapInstance","map","window","lat","lon","lng","bounds","getBounds","ne","getNorthEast","right","google","maps","LatLng","geometry","spherical","computeDistanceBetween","localStorage","getItem","JSON","parse","posts","post","url","Component","AroundMap"],"mappings":"4eAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,YADF,CAEEC,aAFF,CAGEC,SAHF,KAIO,mBAJP,CAKA,OAASC,YAAT,KAA6B,gBAA7B,CACA,OAASC,OAAT,KAAwB,cAAxB,C,GAEMC,CAAAA,e,2WACJC,Y,CAAe,UAAM,CACnB,GAAMC,CAAAA,MAAM,CAAG,MAAKC,SAAL,EAAf,CACA,GAAMC,CAAAA,MAAM,CAAG,MAAKC,SAAL,EAAf,CACA,MAAKC,KAAL,CAAWC,gBAAX,CAA4BL,MAA5B,CAAoCE,MAApC,EACD,C,OAkBDI,S,CAAY,SAACC,WAAD,CAAiB,CAC3B,MAAKC,GAAL,CAAWD,WAAX,CACAE,MAAM,CAACD,GAAP,CAAaD,WAAb,CACD,C,wFAnBW,CACV,GAAMP,CAAAA,MAAM,CAAG,KAAKQ,GAAL,CAASP,SAAT,EAAf,CACA,MAAO,CAAES,GAAG,CAAEV,MAAM,CAACU,GAAP,EAAP,CAAqBC,GAAG,CAAEX,MAAM,CAACY,GAAP,EAA1B,CAAP,CACD,C,6CAEW,CACV,GAAMZ,CAAAA,MAAM,CAAG,KAAKQ,GAAL,CAASP,SAAT,EAAf,CACA,GAAMY,CAAAA,MAAM,CAAG,KAAKL,GAAL,CAASM,SAAT,EAAf,CACA,GAAId,MAAM,EAAIa,MAAd,CAAsB,CACpB,GAAME,CAAAA,EAAE,CAAGF,MAAM,CAACG,YAAP,EAAX,CACA,GAAMC,CAAAA,KAAK,CAAG,GAAIR,CAAAA,MAAM,CAACS,MAAP,CAAcC,IAAd,CAAmBC,MAAvB,CAA8BpB,MAAM,CAACU,GAAP,EAA9B,CAA4CK,EAAE,CAACH,GAAH,EAA5C,CAAd,CACA,MAAO,OAAQH,MAAM,CAACS,MAAP,CAAcC,IAAd,CAAmBE,QAAnB,CAA4BC,SAA5B,CAAsCC,sBAAtC,CAA6DvB,MAA7D,CAAqEiB,KAArE,CAAf,CACD,CACF,C,uCAQQ,CAGP,GAAIO,YAAY,CAACC,OAAb,CAAqB5B,OAArB,GAAiC,IAArC,CAA2C,CACzC,GAAIa,CAAAA,GAAG,CAAG,iBAAV,CACA,GAAIC,CAAAA,GAAG,CAAG,CAAC,gBAAX,CACD,CAHD,IAIK,iBACgBe,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB5B,OAArB,CAAX,CADhB,CACGa,GADH,aACGA,GADH,CACQC,GADR,aACQA,GADR,CAEJ,CAGD,mBACE,oBAAC,SAAD,EACE,GAAG,CAAE,KAAKL,SADZ,CAEE,WAAW,CAAE,EAFf,CAGE,aAAa,CAAE,CAAEI,GAAG,CAAHA,GAAF,CAAOE,GAAG,CAAED,GAAZ,CAHjB,CAIE,SAAS,CAAE,KAAKZ,YAJlB,CAKE,aAAa,CAAE,KAAKA,YALtB,EAOG,KAAKK,KAAL,CAAWwB,KAAX,CAAiBpB,GAAjB,CAAqB,SAACqB,IAAD,qBAAU,oBAAC,YAAD,EAAc,IAAI,CAAEA,IAApB,CAA0B,GAAG,CAAEA,IAAI,CAACC,GAApC,EAAV,EAArB,CAPH,CADF,CAWD,C,6BAnD2BtC,KAAK,CAACuC,S,EAsDpC,MAAO,IAAMC,CAAAA,SAAS,CAAGvC,YAAY,CAACC,aAAa,CAACI,eAAD,CAAd,CAA9B","sourcesContent":["import React from 'react';\nimport {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n} from \"react-google-maps\";\nimport { AroundMarker } from './AroundMarker';\nimport { POS_KEY } from '../constants';\n\nclass NormalAroundMap extends React.Component {\n  reloadMarker = () => {\n    const center = this.getCenter();\n    const radius = this.getRadius();\n    this.props.loadPostsByTopic(center, radius);\n  }\n\n  getCenter() {\n    const center = this.map.getCenter();\n    return { lat: center.lat(), lon: center.lng() };\n  }\n\n  getRadius() {\n    const center = this.map.getCenter();\n    const bounds = this.map.getBounds();\n    if (center && bounds) {\n      const ne = bounds.getNorthEast();\n      const right = new window.google.maps.LatLng(center.lat(), ne.lng());\n      return 0.001 * window.google.maps.geometry.spherical.computeDistanceBetween(center, right);\n    }\n  }\n\n\n  getMapRef = (mapInstance) => {\n    this.map = mapInstance;\n    window.map = mapInstance;\n  }\n\n  render() {\n\n\n    if (localStorage.getItem(POS_KEY) == null) {\n      var lat = 37.84469154098336;\n      var lon = -122.292979660887;\n    }\n    else {\n      var { lat, lon } = JSON.parse(localStorage.getItem(POS_KEY));\n    }\n\n\n    return (\n      <GoogleMap\n        ref={this.getMapRef}\n        defaultZoom={11}\n        defaultCenter={{ lat, lng: lon }}\n        onDragEnd={this.reloadMarker}\n        onZoomChanged={this.reloadMarker}\n      >\n        {this.props.posts.map((post) => <AroundMarker post={post} key={post.url} />)}\n      </GoogleMap>\n    );\n  }\n}\n\nexport const AroundMap = withScriptjs(withGoogleMap(NormalAroundMap));\n"]},"metadata":{},"sourceType":"module"}